# 创建分享链接

**API：** `POST 域名 + /api/v1/share/create`

---

## Header 参数

| 名称          | 类型   | 是否必填 | 说明               |
| :------------ | :----- | :------- | :----------------- |
| Authorization | string | 必填     | 鉴权 access_token  |
| Platform      | string | 必填     | 固定为:open_platform |

---

## Body 参数

| 名称               | 类型   | 是否必填 | 说明                                                                                                           |
| :----------------- | :----- | :------- | :------------------------------------------------------------------------------------------------------------- |
| `shareName`        | string | 必填     | 分享链接                                                                                                       |
| `shareExpire`      | number | 必填     | 分享链接有效期天数,该值为枚举<br>固定只能填写: `1`、`7`、`30`、`0`<br>填写 `0` 时代表永久分享                   |
| `fileIDList`       | string | 必填     | 分享文件 ID 列表,以逗号分割,最大只支持拼接 100 个文件 ID,示例: `1,2,3`                                          |
| `sharePwd`         | string | 选填     | 设置分享链接提取码                                                                                             |
| `trafficSwitch`    | int    | 选填     | 分享提取流量包<br>`1` 全部关闭<br>`2` 打开游客免登录提取<br>`3` 打开超流量用户提取<br>`4` 全部开启                |
| `trafficLimitSwitch` | int    | 选填     | 分享提取流量包流量限制开关<br>`1` 关闭限制<br>`2` 打开限制                                                     |
| `trafficLimit`     | int64  | 选填     | 分享提取流量包限制流量<br>单位：字节                                                                            |

---

## 返回数据

| 名称      | 类型   | 是否必填 | 说明                                                                   |
| :-------- | :----- | :------- | :--------------------------------------------------------------------- |
| `shareID` | number | 必填     | 分享 ID                                                                |
| `shareKey`| string | 必填     | 分享码,请将分享码拼接至 `https://www.123pan.com/s/` 后面访问,即是分享页面 |

---

## 示例

### 请求示例

<details>
<summary>NodeJs - Axios</summary>

```javascript
const axios = require('axios');
let data = JSON.stringify({
  "shareName": "测试分享链接",
  "shareExpire": 1,
  "fileIDList": "14713526,10861131"
});

let config = {
  method: 'post',
  maxBodyLength: Infinity,
  url: 'https://open-api.123pan.com/api/v1/share/create',
  headers: { 
    'Content-Type': 'application/json', 
    'Platform': 'open_platform', 
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...(过长省略)'
  },
  data : data
};

axios.request(config)
.then((response) => {
  console.log(JSON.stringify(response.data));
})
.catch((error) => {
  console.log(error);
});
```
</details>

<details>
<summary>Python - http.client</summary>

```python
import http.client
import json

conn = http.client.HTTPSConnection("open-api.123pan.com")
payload = json.dumps({
    "shareName": "测试分享链接",
    "shareExpire": 1,
    "fileIDList": "14713526,10861131"
})
headers = {
    'Content-Type': 'application/json',
    'Platform': 'open_platform',
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJl...(过长省略)'
}
conn.request("POST", "/api/v1/share/create", payload, headers)
res = conn.getresponse()
data = res.read()
print(data.decode("utf-8"))
```
</details>

### 响应示例

```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "shareID": 87187530,
    "shareKey": "PvitVv-nPeLH"
  },
  "x-traceID": "1e218fcd-dd28-48d3-96a8-d3ab090551d4_kong-db-5898fdd8c6-wgsts"
}```
